<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!-- iPhone 15 Pro Max è§†å£è®¾ç½® -->
  <meta name="viewport" content="width=430, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>æ™ºé¸½ï½œPigeonAI - iPhone 15 Pro Max é¢„è§ˆ</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    /* iPhone 15 Pro Max å±å¹•å°ºå¯¸ï¼š430Ã—932px */
    #iphone-frame {
      width: 430px;
      height: 932px;
      background: #1c1c1e;
      border-radius: 55px;
      padding: 6px;
      box-sizing: border-box;
      position: relative;
      box-shadow: 
        0 0 0 2px rgba(255,255,255,0.1),
        0 20px 60px rgba(0,0,0,0.5),
        inset 0 0 0 1px rgba(255,255,255,0.05);
    }
    
    /* å±å¹•å†…å®¹åŒºåŸŸ */
    #screen {
      width: 100%;
      height: 100%;
      background: #000;
      border-radius: 49px;
      overflow: hidden;
      position: relative;
    }
    
    /* åŠ¨æ€å²›ï¼ˆDynamic Islandï¼‰ */
    #dynamic-island {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      width: 126px;
      height: 37px;
      background: #000;
      border-radius: 19px;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    /* åµŒå…¥iframeæ˜¾ç¤ºç§»åŠ¨ç«¯é¡µé¢ */
    #main-site {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      background: #f8fafc;
      border-radius: 49px;
    }
    
    /* åŠ è½½æç¤º */
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #fff;
      z-index: 999;
      background: rgba(0,0,0,0.7);
      padding: 20px 30px;
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* é¢„è§ˆä¿¡æ¯æç¤º */
    .preview-info {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(0,0,0,0.85);
      color: #fff;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 13px;
      z-index: 10000;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      line-height: 1.6;
    }
    
    .preview-info strong {
      display: block;
      margin-bottom: 4px;
      font-size: 14px;
      color: #a5b4fc;
    }
    
    /* æ§åˆ¶æŒ‰é’® */
    .controls {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 12px;
      z-index: 10000;
    }
    
    .control-btn {
      background: rgba(0,0,0,0.85);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      backdrop-filter: blur(10px);
      transition: all 0.3s;
    }
    
    .control-btn:hover {
      background: rgba(0,0,0,0.95);
      transform: translateY(-2px);
    }
    
    /* å“åº”å¼ï¼šåœ¨å°å±å¹•ä¸Šç¼©å° */
    @media (max-width: 500px) {
      #iphone-frame {
        transform: scale(0.9);
      }
    }
    
    @media (max-width: 450px) {
      #iphone-frame {
        transform: scale(0.8);
      }
    }
  </style>
</head>
<body>
  <div class="preview-info">
    <strong>ğŸ“± iPhone 15 Pro Max é¢„è§ˆ</strong>
    å°ºå¯¸: 430Ã—932px<br>
    è®¾å¤‡åƒç´ æ¯”: 3x<br>
    é¡µé¢: ç§»åŠ¨ç«¯ç‰ˆæœ¬
  </div>
  
  <div id="iphone-frame">
    <div id="dynamic-island"></div>
    <div id="screen">
      <div class="loading" id="loading">
        <div class="loading-spinner"></div>
        <div>æ­£åœ¨åŠ è½½ç§»åŠ¨ç«¯é¡µé¢...</div>
      </div>
      <iframe 
        id="main-site" 
        src="mobile.html"
        allow="geolocation; microphone; camera"
        sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-top-navigation"
        scrolling="yes"
        onload="handleIframeLoad()">
      </iframe>
    </div>
  </div>
  
  <div class="controls">
    <button class="control-btn" onclick="refreshPage()">ğŸ”„ åˆ·æ–°</button>
    <button class="control-btn" onclick="toggleFullscreen()">â›¶ å…¨å±</button>
  </div>
  
  <script>
    // æ¨¡æ‹ŸiPhone 15 Pro Maxçš„ç”¨æˆ·ä»£ç†
    if (navigator.userAgent.indexOf('iPhone') === -1) {
      try {
        Object.defineProperty(navigator, 'userAgent', {
          get: function() {
            return 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1';
          },
          configurable: true
        });
      } catch (e) {
        console.warn('æ— æ³•ä¿®æ”¹userAgent:', e);
      }
    }
    
    // è®¾ç½®å±å¹•å°ºå¯¸ï¼ˆiPhone 15 Pro Max: 430Ã—932pxï¼‰
    try {
      Object.defineProperty(screen, 'width', {
        get: function() { return 430; },
        configurable: true
      });
      Object.defineProperty(screen, 'height', {
        get: function() { return 932; },
        configurable: true
      });
      Object.defineProperty(screen, 'availWidth', {
        get: function() { return 430; },
        configurable: true
      });
      Object.defineProperty(screen, 'availHeight', {
        get: function() { return 932; },
        configurable: true
      });
    } catch (e) {
      console.warn('æ— æ³•ä¿®æ”¹screenå±æ€§:', e);
    }
    
    // è®¾ç½®è®¾å¤‡åƒç´ æ¯”ï¼ˆiPhone 15 Pro Max: 3xï¼‰
    try {
      Object.defineProperty(window, 'devicePixelRatio', {
        get: function() { return 3; },
        configurable: true
      });
    } catch (e) {
      console.warn('æ— æ³•ä¿®æ”¹devicePixelRatio:', e);
    }
    
    // è§¦æ‘¸äº‹ä»¶æ”¯æŒ
    document.addEventListener('touchstart', function(e) {
      // æ”¯æŒè§¦æ‘¸äº‹ä»¶
    }, { passive: true });
    
    // iframeåŠ è½½å®Œæˆåçš„å¤„ç†
    function handleIframeLoad() {
      const loading = document.getElementById('loading');
      if (loading) {
        loading.style.display = 'none';
      }
      
      const iframe = document.getElementById('main-site');
      if (iframe && iframe.contentWindow) {
        try {
          // ç¡®ä¿iframeå†…çš„é¡µé¢èƒ½æ­£ç¡®è¯†åˆ«ä¸ºç§»åŠ¨è®¾å¤‡
          setTimeout(function() {
            // å¼ºåˆ¶è§¦å‘ç§»åŠ¨ç«¯å¸ƒå±€
            if (iframe.contentWindow) {
              iframe.contentWindow.dispatchEvent(new Event('resize'));
              iframe.contentWindow.dispatchEvent(new Event('orientationchange'));
            }
          }, 500);
          
          console.log('âœ… iframeåŠ è½½å®Œæˆï¼Œç§»åŠ¨ç«¯æ ·å¼åº”å·²åº”ç”¨');
        } catch (e) {
          console.warn('âš ï¸ æ— æ³•è®¿é—®iframeå†…å®¹ï¼ˆè·¨åŸŸé™åˆ¶ï¼‰:', e.message);
        }
      }
    }
    
    // åˆ·æ–°é¡µé¢
    function refreshPage() {
      const iframe = document.getElementById('main-site');
      if (iframe) {
        iframe.src = iframe.src;
        const loading = document.getElementById('loading');
        if (loading) {
          loading.style.display = 'block';
        }
      }
    }
    
    // åˆ‡æ¢å…¨å±
    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
          console.log('æ— æ³•è¿›å…¥å…¨å±:', err);
        });
      } else {
        document.exitFullscreen();
      }
    }
    
    // ç›‘å¬iframeåŠ è½½
    const iframe = document.getElementById('main-site');
    if (iframe) {
      iframe.addEventListener('load', handleIframeLoad);
    }
    
    // åˆå§‹åŒ–æ—¥å¿—
    console.log('ğŸ“± iPhone 15 Pro Max é¢„è§ˆæ¨¡å¼å·²å¯ç”¨');
    console.log('å±å¹•å°ºå¯¸:', screen.width, 'Ã—', screen.height);
    console.log('è®¾å¤‡åƒç´ æ¯”:', window.devicePixelRatio);
    console.log('ç”¨æˆ·ä»£ç†:', navigator.userAgent);
    
    // ç›‘å¬å…¨å±å˜åŒ–
    document.addEventListener('fullscreenchange', function() {
      const info = document.querySelector('.preview-info');
      if (document.fullscreenElement) {
        if (info) info.style.display = 'none';
      } else {
        if (info) info.style.display = 'block';
      }
    });
  </script>
</body>
</html>
