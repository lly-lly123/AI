<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <!-- iPhone 15 è§†å£è®¾ç½® -->
  <meta name="viewport" content="width=390, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <!-- iPhone 15 ç”¨æˆ·ä»£ç†æ¨¡æ‹Ÿ -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>æ™ºé¸½ï½œPigeonAI - iPhone 15 é¢„è§ˆ</title>
  <style>
    /* iPhone 15 å±å¹•å°ºå¯¸ */
    body {
      margin: 0;
      padding: 0;
      width: 390px;
      height: 844px;
      overflow-x: hidden;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
      position: relative;
      background: #000;
    }
    
    /* æ¨¡æ‹ŸiPhone 15å±å¹•æ¡†æ¶ */
    #iphone-frame {
      width: 390px;
      height: 844px;
      background: #000;
      border-radius: 47px;
      padding: 8px;
      box-sizing: border-box;
      position: relative;
      margin: 20px auto;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
    }
    
    /* å±å¹•å†…å®¹åŒºåŸŸ */
    #screen {
      width: 100%;
      height: 100%;
      background: #fff;
      border-radius: 39px;
      overflow: hidden;
      position: relative;
    }
    
    /* åˆ˜æµ·åŒºåŸŸ */
    #notch {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 126px;
      height: 37px;
      background: #000;
      border-radius: 0 0 20px 20px;
      z-index: 1000;
    }
    
    /* åµŒå…¥iframeæ˜¾ç¤ºä¸»ç«™ */
    #main-site {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
      background: #f8fafc;
    }
    
    /* åŠ è½½æç¤º */
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      color: #64748b;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      z-index: 999;
    }
    
    /* æç¤ºä¿¡æ¯ */
    .preview-info {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.8);
      color: #fff;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      z-index: 10000;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    }
  </style>
</head>
<body>
  <div class="preview-info">
    ğŸ“± iPhone 15 é¢„è§ˆæ¨¡å¼<br>
    å°ºå¯¸: 390Ã—844px<br>
    é¡µé¢: ç§»åŠ¨ç«¯ç‰ˆæœ¬
  </div>
  
  <div id="iphone-frame">
    <div id="notch"></div>
    <div id="screen">
      <div class="loading" id="loading">æ­£åœ¨åŠ è½½ç§»åŠ¨ç«¯é¡µé¢...</div>
      <iframe 
        id="main-site" 
        src="mobile.html"
        allow="geolocation; microphone; camera"
        sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-top-navigation"
        scrolling="yes"
        onload="handleIframeLoad()">
      </iframe>
    </div>
  </div>
  
  <script>
    // è®¾ç½®iPhone 15çš„ç”¨æˆ·ä»£ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
    if (navigator.userAgent.indexOf('iPhone') === -1) {
      Object.defineProperty(navigator, 'userAgent', {
        get: function() {
          return 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1';
        }
      });
    }
    
    // è®¾ç½®å±å¹•å°ºå¯¸
    Object.defineProperty(screen, 'width', {
      get: function() { return 390; }
    });
    Object.defineProperty(screen, 'height', {
      get: function() { return 844; }
    });
    Object.defineProperty(screen, 'availWidth', {
      get: function() { return 390; }
    });
    Object.defineProperty(screen, 'availHeight', {
      get: function() { return 844; }
    });
    
    // è®¾ç½®è®¾å¤‡åƒç´ æ¯”
    Object.defineProperty(window, 'devicePixelRatio', {
      get: function() { return 3; }
    });
    
    // è§¦æ‘¸äº‹ä»¶æ”¯æŒ
    document.addEventListener('touchstart', function(e) {
      // æ”¯æŒè§¦æ‘¸äº‹ä»¶
    }, { passive: true });
    
    // iframeåŠ è½½å®Œæˆåçš„å¤„ç†
    function handleIframeLoad() {
      const loading = document.getElementById('loading');
      if (loading) {
        loading.style.display = 'none';
      }
      
      const iframe = document.getElementById('main-site');
      if (iframe && iframe.contentWindow) {
        try {
          // ç¡®ä¿iframeå†…çš„é¡µé¢èƒ½æ­£ç¡®è¯†åˆ«ä¸ºç§»åŠ¨è®¾å¤‡
          const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
          
          // æ£€æŸ¥å¹¶ç¡®ä¿ç§»åŠ¨ç«¯æ ·å¼åº”ç”¨
          setTimeout(function() {
            // å¼ºåˆ¶è§¦å‘ç§»åŠ¨ç«¯å¸ƒå±€
            if (iframe.contentWindow) {
              iframe.contentWindow.dispatchEvent(new Event('resize'));
            }
          }, 500);
          
          console.log('âœ… iframeåŠ è½½å®Œæˆï¼Œç§»åŠ¨ç«¯æ ·å¼åº”å·²åº”ç”¨');
        } catch (e) {
          console.warn('âš ï¸ æ— æ³•è®¿é—®iframeå†…å®¹ï¼ˆè·¨åŸŸé™åˆ¶ï¼‰:', e.message);
        }
      }
    }
    
    // ç›‘å¬iframeåŠ è½½
    const iframe = document.getElementById('main-site');
    if (iframe) {
      iframe.addEventListener('load', handleIframeLoad);
    }
    
    console.log('ğŸ“± iPhone 15 é¢„è§ˆæ¨¡å¼å·²å¯ç”¨');
    console.log('å±å¹•å°ºå¯¸:', screen.width, 'Ã—', screen.height);
    console.log('è®¾å¤‡åƒç´ æ¯”:', window.devicePixelRatio);
  </script>
</body>
</html>

