# 🔐 API Key 安全保护指南

## ⚠️ 重要安全提示

您的API Key是敏感信息，一旦泄露可能导致：
- 他人盗用您的API额度
- 产生意外费用
- 服务被滥用
- 账号被封禁

---

## ✅ 已实施的安全措施

### 1. **Git忽略配置**
- ✅ `.env` 文件已添加到 `.gitignore`
- ✅ 确保API Key不会被提交到Git仓库
- ✅ 配置文件不会被意外分享

### 2. **环境变量隔离**
- ✅ API Key存储在 `.env` 文件中
- ✅ 不硬编码在源代码中
- ✅ 通过环境变量安全加载

---

## 🛡️ 安全最佳实践

### 1. **文件权限保护**

设置 `.env` 文件权限，只允许所有者读取：

```bash
cd 智鸽系统_副本/backend
chmod 600 .env
```

这将确保只有文件所有者可以读取API Key。

### 2. **不要分享 `.env` 文件**

❌ **永远不要**：
- 将 `.env` 文件发送给他人
- 将 `.env` 文件上传到网盘或云存储
- 在聊天工具中发送API Key
- 将API Key截图分享
- 在代码注释中写入API Key

✅ **正确做法**：
- 只分享 `config.example.env`（不包含真实API Key）
- 通过安全渠道单独发送API Key
- 使用密码管理器存储API Key

### 3. **定期轮换API Key**

建议每3-6个月更换一次API Key：

1. 登录智谱AI控制台
2. 创建新的API Key
3. 更新 `.env` 文件
4. 删除旧的API Key

### 4. **监控API使用情况**

定期检查API使用情况：
- 登录智谱AI控制台查看使用量
- 设置使用量告警
- 发现异常使用立即更换API Key

### 5. **使用环境变量验证**

运行安全检查脚本验证配置：

```bash
cd 智鸽系统_副本/backend
node security-check.js
```

---

## 🔍 安全检查清单

在分享代码或部署前，请检查：

- [ ] `.env` 文件不在Git仓库中
- [ ] `.gitignore` 包含 `.env`
- [ ] 源代码中没有硬编码的API Key
- [ ] `.env` 文件权限设置为 600
- [ ] 备份文件不包含 `.env`
- [ ] 日志文件中不包含API Key

---

## 🚨 如果API Key泄露了怎么办？

### 立即采取行动：

1. **立即更换API Key**
   - 登录智谱AI控制台
   - 删除泄露的API Key
   - 创建新的API Key
   - 更新 `.env` 文件

2. **检查使用情况**
   - 查看API使用日志
   - 确认是否有异常使用
   - 联系服务商报告泄露

3. **审查安全措施**
   - 检查 `.gitignore` 配置
   - 检查文件权限
   - 审查代码仓库历史

---

## 📋 安全配置文件说明

### `.env` 文件（敏感，已忽略）
- 包含真实的API Key
- 已添加到 `.gitignore`
- 不应提交到Git

### `config.example.env` 文件（可分享）
- 配置文件模板
- 不包含真实API Key
- 可以安全分享

---

## 🔐 文件权限设置

运行以下命令设置正确的文件权限：

```bash
cd 智鸽系统_副本/backend

# 设置.env文件权限（只有所有者可读）
chmod 600 .env

# 设置目录权限
chmod 700 .

# 验证权限
ls -la .env
```

正确的权限应该是：`-rw-------`（600）

---

## 📚 相关文档

- `API配置完成.md` - API配置说明
- `快速配置AI助手.md` - 快速配置指南
- `获取API Key详细指南.md` - 获取API Key步骤

---

## ✅ 安全配置验证

运行安全检查工具：

```bash
cd 智鸽系统_副本/backend
node security-check.js
```

---

**记住：安全第一！保护好您的API Key就是保护您的账号和资源！** 🔐




































































